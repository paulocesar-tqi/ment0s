<ion-view title="posts">
    <ion-header-bar align-title="center" class="bar bar-header bar-balanced">
        <h1 class="title">Promobugs</h1>
        <div class="buttons">
            <button class="button" ng-click="doShare()"><i class="icon ion-help-circled"></i></div></button>
        </div>
    </ion-header-bar>
    <ion-content overflow-scroll="true">
        <ion-refresher on-refresh="loadPosts()" pulling-icon="ion-android-arrow-dropdown-circle">
        </ion-refresher>
        <div class="list" data-ng-if="posts.length">
            <div data-ng-repeat="p in posts" >
                <div class="post source{{p.sourceId}}">
                    <div class="post-text" id="post{{p.id}}">
                        <div class="post-image{{p.sourceId}}"></div>
                        <div data-ng-bind-html="toTrusted(p.html)"> </div>
                    </div>
                    <div ngc-seemore="'{{p.id}}'"></div>
                </div>
                <div class="footer">
                        <a class="footer-button" ng-click="openUrlViewer(p.url)">
                            <i class="icon ion-ios-home"></i>
                        </a>
                        <a class="footer-button" ng-click="doShare(p.id, p.url)">
                            <i class="icon ion-android-share-alt"></i>
                        </a>
                        <p class="pubdate">{{p.publicationDate}}</p>
                </div>
            </div>
        </div>
        <ion-infinite-scroll on-infinite="morePosts()" immediate-check="false"
                data-ng-if="infiniteLoad" distance="1%">
        </ion-infinite-scroll>
    </ion-content>

</ion-view>